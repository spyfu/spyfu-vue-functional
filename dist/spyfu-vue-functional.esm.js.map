{"version":3,"file":"spyfu-vue-functional.esm.js","sources":["../lib/index.js"],"sourcesContent":["// helper function to normalize component attributes\r\nconst normalize = (context, attrs) => {\r\n    // first test if the component is functional\r\n    if (!context) {\r\n        throw new TypeError(`[spyfu-vue-functional]: Non-functional components cannot use functional binding helpers.`);\r\n    }\r\n    \r\n    return Object.assign({ \r\n        attrs: {}, \r\n        class: [], \r\n        on: {}, \r\n        style: {} \r\n    }, attrs);\r\n}\r\n\r\n// bind all context data\r\nexport function bindAll(context, attrs = {}) {\r\n    attrs = normalize(context, attrs);\r\n\r\n    attrs = this.bindAttributes(context, attrs, true);\r\n    attrs = this.bindStyles(context, attrs, true);\r\n    attrs = this.bindClasses(context, attrs, true);\r\n    attrs = this.bindDirectives(context, attrs, true);\r\n    attrs = this.bindEventListeners(context, attrs, true);\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind element attributes\r\nexport function bindAttributes(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(context, attrs);\r\n    }\r\n\r\n    if (context.data && context.data.attrs) {\r\n        attrs.attrs = context.data.attrs;\r\n    }\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind directives\r\nexport function bindDirectives(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(context, attrs);\r\n    }\r\n\r\n    if (context.data && context.data.directives) {\r\n        const { directives } = context.data;\r\n\r\n        // v-show\r\n        if (directives.find(({ name, value }) => name === 'show' && !value)) {\r\n            attrs.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind both static and dynamic classes\r\nexport function bindClasses(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(context, attrs);\r\n    }\r\n\r\n    attrs = this.bindDynamicClasses(context, attrs);\r\n    attrs = this.bindStaticClasses(context, attrs);\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind dynamic classes\r\nexport function bindDynamicClasses(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(context, attrs);\r\n    }\r\n\r\n    if (context.data && context.data.class) {\r\n        if (Array.isArray(context.data.class)) {\r\n            attrs.class.push(...context.data.class);\r\n        } else {\r\n            Object.keys(context.data.class)\r\n                .filter(className => context.data.class[className])\r\n                .forEach(className => attrs.class.push(className));\r\n        }\r\n    }\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind dynamic styles\r\nexport function bindDynamicStyles(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(context, attrs);\r\n    }\r\n\r\n    if (context.data && context.data.style) {\r\n        attrs.style = Object.assign({}, attrs.style, context.data.style);\r\n    }\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind event listeners\r\nexport function bindEventListeners(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(context, attrs);\r\n    }\r\n\r\n    if (context.listeners) {\r\n        attrs.on = Object.assign({}, attrs.on, context.listeners);\r\n    }\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind static classes\r\nexport function bindStaticClasses(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(context, attrs);\r\n    }\r\n\r\n    if (context.data && context.data.staticClass) {\r\n        attrs.class.push(context.data.staticClass);\r\n    }\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind static styles\r\nexport function bindStaticStyles(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(context, attrs);\r\n    }\r\n\r\n    if (context.data && context.data.staticStyle) {\r\n        attrs.style = Object.assign({}, attrs.style, context.data.staticStyle);\r\n    }\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind static and dynamic styles\r\nexport function bindStyles(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(context, attrs);\r\n    }\r\n\r\n    attrs = this.bindDynamicStyles(context, attrs);\r\n    attrs = this.bindStaticStyles(context, attrs);\r\n\r\n    return attrs;\r\n}\r\n"],"names":["normalize","context","attrs","TypeError","Object","assign","bindAll","bindAttributes","bindStyles","bindClasses","bindDirectives","bindEventListeners","isNormalized","data","directives","find","name","value","style","display","bindDynamicClasses","bindStaticClasses","class","Array","isArray","push","keys","filter","className","forEach","bindDynamicStyles","listeners","on","staticClass","bindStaticStyles","staticStyle"],"mappings":"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"}