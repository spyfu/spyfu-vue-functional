{"version":3,"file":"spyfu-vue-functional.js","sources":["../lib/index.js"],"sourcesContent":["// helper function to normalize component attributes\r\nconst normalize = attrs => Object.assign({ attrs: {}, class: [], on: {}, style: {} }, attrs);\r\n\r\n// bind everything from the placeholder element\r\nexport function bindAll(context, attrs = {}) {\r\n    attrs = normalize(attrs);\r\n    attrs = bindAttributes(context, attrs, true);\r\n    attrs = bindClasses(context, attrs, true);\r\n    attrs = bindDirectives(context, attrs, true);\r\n    attrs = bindEventListeners(context, attrs, true);\r\n    attrs = bindKey(context, attrs, true);\r\n    attrs = bindScopeId(context, attrs, true);\r\n    attrs = bindStyles(context, attrs, true);\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind dom attributes\r\nexport function bindAttributes(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(attrs);\r\n    }\r\n\r\n    if (context.data && context.data.attrs) {\r\n        attrs.attrs = context.data.attrs;\r\n    }\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind both static and dynamic classes\r\nexport function bindClasses(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(attrs);\r\n    }\r\n\r\n    attrs = bindDynamicClasses(context, attrs);\r\n    attrs = bindStaticClasses(context, attrs);\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind directives\r\nexport function bindDirectives(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(attrs);\r\n    }\r\n\r\n    if (context.data && context.data.directives) {\r\n        const { directives } = context.data;\r\n\r\n        // v-show\r\n        if (directives.find(({ name, value }) => name === 'show' && !value)) {\r\n            attrs.style.display = 'none';\r\n        }\r\n\r\n        // custom directives\r\n        attrs.directives = directives.filter(({ name }) => name !== 'show');\r\n    }\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind dynamic classes\r\nexport function bindDynamicClasses(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(attrs);\r\n    }\r\n\r\n    if (context.data && context.data.class) {\r\n        if (typeof context.data.class === 'string') {\r\n            attrs.class.push(context.data.class);\r\n        } else if (Array.isArray(context.data.class)) {\r\n            attrs.class.push(...context.data.class);\r\n        } else {\r\n            Object.keys(context.data.class)\r\n                .filter(className => context.data.class[className])\r\n                .forEach(className => attrs.class.push(className));\r\n        }\r\n    }\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind dynamic styles\r\nexport function bindDynamicStyles(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(attrs);\r\n    }\r\n\r\n    if (context.data && context.data.style) {\r\n        attrs.style = Object.assign({}, attrs.style, context.data.style);\r\n    }\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind event listeners\r\nexport function bindEventListeners(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(attrs);\r\n    }\r\n\r\n    if (context.listeners) {\r\n        attrs.on = Object.assign({}, attrs.on, context.listeners);\r\n    }\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind a vnode key\r\nexport function bindKey(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(attrs);\r\n    }\r\n\r\n    if (context.data && context.data.key) {\r\n        attrs.key = context.data.key;\r\n    }\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind css scope id\r\nexport function bindScopeId(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(attrs);\r\n    }\r\n\r\n    if (context.parent.$options._scopeId) {\r\n        attrs.attrs[context.parent.$options._scopeId] = '';\r\n    }\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind static classes\r\nexport function bindStaticClasses(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(attrs);\r\n    }\r\n\r\n    if (context.data && context.data.staticClass) {\r\n        attrs.class.push(context.data.staticClass);\r\n    }\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind static styles\r\nexport function bindStaticStyles(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(attrs);\r\n    }\r\n\r\n    if (context.data && context.data.staticStyle) {\r\n        attrs.style = Object.assign({}, attrs.style, context.data.staticStyle);\r\n    }\r\n\r\n    return attrs;\r\n}\r\n\r\n// bind static and dynamic styles\r\nexport function bindStyles(context, attrs = {}, isNormalized = false) {\r\n    if (!isNormalized) {\r\n        attrs = normalize(attrs);\r\n    }\r\n\r\n    attrs = bindDynamicStyles(context, attrs);\r\n    attrs = bindStaticStyles(context, attrs);\r\n\r\n    return attrs;\r\n}\r\n\r\nexport default {\r\n    bindAll,\r\n    bindAttributes,\r\n    bindClasses,\r\n    bindDirectives,\r\n    bindDynamicClasses,\r\n    bindDynamicStyles,\r\n    bindEventListeners,\r\n    bindKey,\r\n    bindScopeId,\r\n    bindStaticClasses,\r\n    bindStaticStyles,\r\n    bindStyles,\r\n}\r\n"],"names":["normalize","Object","assign","attrs","class","on","style","bindAll","context","bindAttributes","bindClasses","bindDirectives","bindEventListeners","bindKey","bindScopeId","bindStyles","isNormalized","data","bindDynamicClasses","bindStaticClasses","directives","find","name","value","display","filter","push","Array","isArray","keys","className","forEach","bindDynamicStyles","listeners","key","parent","$options","_scopeId","staticClass","bindStaticStyles","staticStyle"],"mappings":";;;;;;;;;;;;;;;;AAAA;AACA,IAAMA,YAAY,SAAZA,SAAY;WAASC,OAAOC,MAAP,CAAc,EAAEC,OAAO,EAAT,EAAaC,OAAO,EAApB,EAAwBC,IAAI,EAA5B,EAAgCC,OAAO,EAAvC,EAAd,EAA2DH,KAA3D,CAAT;CAAlB;;;AAGA,AAAO,SAASI,OAAT,CAAiBC,OAAjB,EAAsC;QAAZL,KAAY,uEAAJ,EAAI;;YACjCH,UAAUG,KAAV,CAAR;YACQM,eAAeD,OAAf,EAAwBL,KAAxB,EAA+B,IAA/B,CAAR;YACQO,YAAYF,OAAZ,EAAqBL,KAArB,EAA4B,IAA5B,CAAR;YACQQ,eAAeH,OAAf,EAAwBL,KAAxB,EAA+B,IAA/B,CAAR;YACQS,mBAAmBJ,OAAnB,EAA4BL,KAA5B,EAAmC,IAAnC,CAAR;YACQU,QAAQL,OAAR,EAAiBL,KAAjB,EAAwB,IAAxB,CAAR;YACQW,YAAYN,OAAZ,EAAqBL,KAArB,EAA4B,IAA5B,CAAR;YACQY,WAAWP,OAAX,EAAoBL,KAApB,EAA2B,IAA3B,CAAR;;WAEOA,KAAP;;;;AAIJ,AAAO,SAASM,cAAT,CAAwBD,OAAxB,EAAmE;QAAlCL,KAAkC,uEAA1B,EAA0B;QAAtBa,YAAsB,uEAAP,KAAO;;QAClE,CAACA,YAAL,EAAmB;gBACPhB,UAAUG,KAAV,CAAR;;;QAGAK,QAAQS,IAAR,IAAgBT,QAAQS,IAAR,CAAad,KAAjC,EAAwC;cAC9BA,KAAN,GAAcK,QAAQS,IAAR,CAAad,KAA3B;;;WAGGA,KAAP;;;;AAIJ,AAAO,SAASO,WAAT,CAAqBF,OAArB,EAAgE;QAAlCL,KAAkC,uEAA1B,EAA0B;QAAtBa,YAAsB,uEAAP,KAAO;;QAC/D,CAACA,YAAL,EAAmB;gBACPhB,UAAUG,KAAV,CAAR;;;YAGIe,mBAAmBV,OAAnB,EAA4BL,KAA5B,CAAR;YACQgB,kBAAkBX,OAAlB,EAA2BL,KAA3B,CAAR;;WAEOA,KAAP;;;;AAIJ,AAAO,SAASQ,cAAT,CAAwBH,OAAxB,EAAmE;QAAlCL,KAAkC,uEAA1B,EAA0B;QAAtBa,YAAsB,uEAAP,KAAO;;QAClE,CAACA,YAAL,EAAmB;gBACPhB,UAAUG,KAAV,CAAR;;;QAGAK,QAAQS,IAAR,IAAgBT,QAAQS,IAAR,CAAaG,UAAjC,EAA6C;YACjCA,UADiC,GAClBZ,QAAQS,IADU,CACjCG,UADiC;;;;YAIrCA,WAAWC,IAAX,CAAgB;gBAAGC,IAAH,QAAGA,IAAH;gBAASC,KAAT,QAASA,KAAT;mBAAqBD,SAAS,MAAT,IAAmB,CAACC,KAAzC;SAAhB,CAAJ,EAAqE;kBAC3DjB,KAAN,CAAYkB,OAAZ,GAAsB,MAAtB;;;;cAIEJ,UAAN,GAAmBA,WAAWK,MAAX,CAAkB;gBAAGH,IAAH,SAAGA,IAAH;mBAAcA,SAAS,MAAvB;SAAlB,CAAnB;;;WAGGnB,KAAP;;;;AAIJ,AAAO,SAASe,kBAAT,CAA4BV,OAA5B,EAAuE;QAAlCL,KAAkC,uEAA1B,EAA0B;QAAtBa,YAAsB,uEAAP,KAAO;;QACtE,CAACA,YAAL,EAAmB;gBACPhB,UAAUG,KAAV,CAAR;;;QAGAK,QAAQS,IAAR,IAAgBT,QAAQS,IAAR,CAAab,KAAjC,EAAwC;YAChC,OAAOI,QAAQS,IAAR,CAAab,KAApB,KAA8B,QAAlC,EAA4C;kBAClCA,KAAN,CAAYsB,IAAZ,CAAiBlB,QAAQS,IAAR,CAAab,KAA9B;SADJ,MAEO,IAAIuB,MAAMC,OAAN,CAAcpB,QAAQS,IAAR,CAAab,KAA3B,CAAJ,EAAuC;;;kCACpCA,KAAN,EAAYsB,IAAZ,uCAAoBlB,QAAQS,IAAR,CAAab,KAAjC;SADG,MAEA;mBACIyB,IAAP,CAAYrB,QAAQS,IAAR,CAAab,KAAzB,EACKqB,MADL,CACY;uBAAajB,QAAQS,IAAR,CAAab,KAAb,CAAmB0B,SAAnB,CAAb;aADZ,EAEKC,OAFL,CAEa;uBAAa5B,MAAMC,KAAN,CAAYsB,IAAZ,CAAiBI,SAAjB,CAAb;aAFb;;;;WAMD3B,KAAP;;;;AAIJ,AAAO,SAAS6B,iBAAT,CAA2BxB,OAA3B,EAAsE;QAAlCL,KAAkC,uEAA1B,EAA0B;QAAtBa,YAAsB,uEAAP,KAAO;;QACrE,CAACA,YAAL,EAAmB;gBACPhB,UAAUG,KAAV,CAAR;;;QAGAK,QAAQS,IAAR,IAAgBT,QAAQS,IAAR,CAAaX,KAAjC,EAAwC;cAC9BA,KAAN,GAAcL,OAAOC,MAAP,CAAc,EAAd,EAAkBC,MAAMG,KAAxB,EAA+BE,QAAQS,IAAR,CAAaX,KAA5C,CAAd;;;WAGGH,KAAP;;;;AAIJ,AAAO,SAASS,kBAAT,CAA4BJ,OAA5B,EAAuE;QAAlCL,KAAkC,uEAA1B,EAA0B;QAAtBa,YAAsB,uEAAP,KAAO;;QACtE,CAACA,YAAL,EAAmB;gBACPhB,UAAUG,KAAV,CAAR;;;QAGAK,QAAQyB,SAAZ,EAAuB;cACb5B,EAAN,GAAWJ,OAAOC,MAAP,CAAc,EAAd,EAAkBC,MAAME,EAAxB,EAA4BG,QAAQyB,SAApC,CAAX;;;WAGG9B,KAAP;;;;AAIJ,AAAO,SAASU,OAAT,CAAiBL,OAAjB,EAA4D;QAAlCL,KAAkC,uEAA1B,EAA0B;QAAtBa,YAAsB,uEAAP,KAAO;;QAC3D,CAACA,YAAL,EAAmB;gBACPhB,UAAUG,KAAV,CAAR;;;QAGAK,QAAQS,IAAR,IAAgBT,QAAQS,IAAR,CAAaiB,GAAjC,EAAsC;cAC5BA,GAAN,GAAY1B,QAAQS,IAAR,CAAaiB,GAAzB;;;WAGG/B,KAAP;;;;AAIJ,AAAO,SAASW,WAAT,CAAqBN,OAArB,EAAgE;QAAlCL,KAAkC,uEAA1B,EAA0B;QAAtBa,YAAsB,uEAAP,KAAO;;QAC/D,CAACA,YAAL,EAAmB;gBACPhB,UAAUG,KAAV,CAAR;;;QAGAK,QAAQ2B,MAAR,CAAeC,QAAf,CAAwBC,QAA5B,EAAsC;cAC5BlC,KAAN,CAAYK,QAAQ2B,MAAR,CAAeC,QAAf,CAAwBC,QAApC,IAAgD,EAAhD;;;WAGGlC,KAAP;;;;AAIJ,AAAO,SAASgB,iBAAT,CAA2BX,OAA3B,EAAsE;QAAlCL,KAAkC,uEAA1B,EAA0B;QAAtBa,YAAsB,uEAAP,KAAO;;QACrE,CAACA,YAAL,EAAmB;gBACPhB,UAAUG,KAAV,CAAR;;;QAGAK,QAAQS,IAAR,IAAgBT,QAAQS,IAAR,CAAaqB,WAAjC,EAA8C;cACpClC,KAAN,CAAYsB,IAAZ,CAAiBlB,QAAQS,IAAR,CAAaqB,WAA9B;;;WAGGnC,KAAP;;;;AAIJ,AAAO,SAASoC,gBAAT,CAA0B/B,OAA1B,EAAqE;QAAlCL,KAAkC,uEAA1B,EAA0B;QAAtBa,YAAsB,uEAAP,KAAO;;QACpE,CAACA,YAAL,EAAmB;gBACPhB,UAAUG,KAAV,CAAR;;;QAGAK,QAAQS,IAAR,IAAgBT,QAAQS,IAAR,CAAauB,WAAjC,EAA8C;cACpClC,KAAN,GAAcL,OAAOC,MAAP,CAAc,EAAd,EAAkBC,MAAMG,KAAxB,EAA+BE,QAAQS,IAAR,CAAauB,WAA5C,CAAd;;;WAGGrC,KAAP;;;;AAIJ,AAAO,SAASY,UAAT,CAAoBP,OAApB,EAA+D;QAAlCL,KAAkC,uEAA1B,EAA0B;QAAtBa,YAAsB,uEAAP,KAAO;;QAC9D,CAACA,YAAL,EAAmB;gBACPhB,UAAUG,KAAV,CAAR;;;YAGI6B,kBAAkBxB,OAAlB,EAA2BL,KAA3B,CAAR;YACQoC,iBAAiB/B,OAAjB,EAA0BL,KAA1B,CAAR;;WAEOA,KAAP;;;AAGJ,YAAe;oBAAA;kCAAA;4BAAA;kCAAA;0CAAA;wCAAA;0CAAA;oBAAA;4BAAA;wCAAA;sCAAA;;CAAf;;;;;;;;;;;;;;;;;;;;;;;;"}