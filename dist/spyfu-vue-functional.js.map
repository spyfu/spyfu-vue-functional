{"version":3,"file":"spyfu-vue-functional.js","sources":["../lib/index.js"],"sourcesContent":["// helper function to normalize component attributes\r\nconst normalize = attrs => Object.assign({ attrs: {}, class: [], on: {}, style: {} }, attrs);\r\n\r\nexport default {\r\n    // bind all context data\r\n    bindAll(context, attrs = {}) {\r\n        attrs = normalize(attrs);\r\n\r\n        attrs = this.bindAttributes(context, attrs, true);\r\n        attrs = this.bindStyles(context, attrs, true);\r\n        attrs = this.bindClasses(context, attrs, true);\r\n        attrs = this.bindDirectives(context, attrs, true);\r\n        attrs = this.bindEventListeners(context, attrs, true);\r\n\r\n        return attrs;\r\n    },\r\n\r\n    // bind element attributes\r\n    bindAttributes(context, attrs = {}, isNormalized = false) {\r\n        if (!isNormalized) {\r\n            attrs = normalize(attrs);\r\n        }\r\n\r\n        if (context.data && context.data.attrs) {\r\n            attrs.attrs = context.data.attrs;\r\n        }\r\n\r\n        return attrs;\r\n    },\r\n\r\n    // bind directives\r\n    bindDirectives(context, attrs = {}, isNormalized = false) {\r\n        if (!isNormalized) {\r\n            attrs = normalize(attrs);\r\n        }\r\n\r\n        if (context.data && context.data.directives) {\r\n            const { directives } = context.data;\r\n\r\n            // v-show\r\n            if (directives.find(({ name, value }) => name === 'show' && !value)) {\r\n                attrs.style.display = 'none';\r\n            }\r\n        }\r\n\r\n        return attrs;\r\n    },\r\n\r\n    // bind both static and dynamic classes\r\n    bindClasses(context, attrs = {}, isNormalized = false) {\r\n        if (!isNormalized) {\r\n            attrs = normalize(attrs);\r\n        }\r\n\r\n        attrs = this.bindDynamicClasses(context, attrs);\r\n        attrs = this.bindStaticClasses(context, attrs);\r\n\r\n        return attrs;\r\n    },\r\n\r\n    // bind dynamic classes\r\n    bindDynamicClasses(context, attrs = {}, isNormalized = false) {\r\n        if (!isNormalized) {\r\n            attrs = normalize(attrs);\r\n        }\r\n\r\n        if (context.data && context.data.class) {\r\n            if (Array.isArray(context.data.class)) {\r\n                attrs.class.push(...context.data.class);\r\n            } else {\r\n                Object.keys(context.data.class)\r\n                    .filter(className => context.data.class[className])\r\n                    .forEach(className => attrs.class.push(className));\r\n            }\r\n        }\r\n\r\n        return attrs;\r\n    },\r\n\r\n    // bind dynamic styles\r\n    bindDynamicStyles(context, attrs = {}, isNormalized = false) {\r\n        if (!isNormalized) {\r\n            attrs = normalize(attrs);\r\n        }\r\n\r\n        if (context.data && context.data.style) {\r\n            attrs.style = Object.assign({}, attrs.style, context.data.style);\r\n        }\r\n\r\n        return attrs;\r\n    },\r\n\r\n    // bind event listeners\r\n    bindEventListeners(context, attrs = {}, isNormalized = false) {\r\n        if (!isNormalized) {\r\n            attrs = normalize(attrs);\r\n        }\r\n\r\n        if (context.listeners) {\r\n            attrs.on = Object.assign({}, attrs.on, context.listeners);\r\n        }\r\n\r\n        return attrs;\r\n    },\r\n\r\n    // bind static classes\r\n    bindStaticClasses(context, attrs = {}, isNormalized = false) {\r\n        if (!isNormalized) {\r\n            attrs = normalize(attrs);\r\n        }\r\n\r\n        if (context.data && context.data.staticClass) {\r\n            attrs.class.push(context.data.staticClass);\r\n        }\r\n\r\n        return attrs;\r\n    },\r\n\r\n    // bind static styles\r\n    bindStaticStyles(context, attrs = {}, isNormalized = false) {\r\n        if (!isNormalized) {\r\n            attrs = normalize(attrs);\r\n        }\r\n\r\n        if (context.data && context.data.staticStyle) {\r\n            attrs.style = Object.assign({}, attrs.style, context.data.staticStyle);\r\n        }\r\n\r\n        return attrs;\r\n    },\r\n\r\n    // bind static and dynamic styles\r\n    bindStyles(context, attrs = {}, isNormalized = false) {\r\n        if (!isNormalized) {\r\n            attrs = normalize(attrs);\r\n        }\r\n\r\n        attrs = this.bindDynamicStyles(context, attrs);\r\n        attrs = this.bindStaticStyles(context, attrs);\r\n\r\n        return attrs;\r\n    },\r\n};\r\n"],"names":["normalize","Object","assign","attrs","class","on","style","context","bindAttributes","bindStyles","bindClasses","bindDirectives","bindEventListeners","isNormalized","data","directives","find","name","value","display","bindDynamicClasses","bindStaticClasses","Array","isArray","push","keys","filter","className","forEach","listeners","staticClass","staticStyle","bindDynamicStyles","bindStaticStyles"],"mappings":"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"}