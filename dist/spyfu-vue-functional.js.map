{"version":3,"file":"spyfu-vue-functional.js","sources":["../lib/index.js"],"sourcesContent":["// helper function to normalize component attributes\nconst normalize = (context, attrs) => {\n    // first test if the component is functional\n    if (!context) {\n        throw new TypeError(`[spyfu-vue-functional]: Non-functional components cannot use functional binding helpers.`);\n    }\n    \n    return Object.assign({\n        attrs: {},\n        class: [],\n        directives: [],\n        on: {},\n        style: {},\n    }, attrs);\n}\n\n// bind all context data\nexport function bindAll(context, attrs = {}) {\n    attrs = normalize(context, attrs);\n\n    attrs = bindAttributes(context, attrs, true);\n    attrs = bindStyles(context, attrs, true);\n    attrs = bindClasses(context, attrs, true);\n    attrs = bindDirectives(context, attrs, true);\n    attrs = bindEventListeners(context, attrs, true);\n    attrs = bindScopeId(context, attrs, true);\n\n    return attrs;\n}\n\n// bind element attributes\nexport function bindAttributes(context, attrs = {}, isNormalized = false) {\n    if (!isNormalized) {\n        attrs = normalize(context, attrs);\n    }\n\n    if (context.data && context.data.attrs) {\n        attrs.attrs = context.data.attrs;\n    }\n\n    return attrs;\n}\n\n// bind directives\nexport function bindDirectives(context, attrs = {}, isNormalized = false) {\n    if (!isNormalized) {\n        attrs = normalize(context, attrs);\n    }\n\n    if (context.data && context.data.directives) {\n        const { directives } = context.data;\n\n        // v-show\n        if (directives.find(({ name, value }) => name === 'show' && !value)) {\n            attrs.style.display = 'none';\n        }\n    }\n\n    return attrs;\n}\n\n// bind both static and dynamic classes\nexport function bindClasses(context, attrs = {}, isNormalized = false) {\n    if (!isNormalized) {\n        attrs = normalize(context, attrs);\n    }\n\n    attrs = bindDynamicClasses(context, attrs);\n    attrs = bindStaticClasses(context, attrs);\n\n    return attrs;\n}\n\n// bind dynamic classes\nexport function bindDynamicClasses(context, attrs = {}, isNormalized = false) {\n    if (!isNormalized) {\n        attrs = normalize(context, attrs);\n    }\n\n    if (context.data && context.data.class) {\n        if (typeof context.data.class === 'string') {\n            attrs.class.push(...context.data.class.split(' '));\n        } else if (Array.isArray(context.data.class)) {\n            attrs.class.push(...context.data.class);\n        } else {\n            Object.keys(context.data.class)\n                .filter(className => context.data.class[className])\n                .forEach(className => attrs.class.push(className));\n        }\n    }\n\n    return attrs;\n}\n\n// bind dynamic styles\nexport function bindDynamicStyles(context, attrs = {}, isNormalized = false) {\n    if (!isNormalized) {\n        attrs = normalize(context, attrs);\n    }\n\n    if (context.data && context.data.style) {\n        attrs.style = Object.assign({}, attrs.style, context.data.style);\n    }\n\n    return attrs;\n}\n\n// bind event listeners\nexport function bindEventListeners(context, attrs = {}, isNormalized = false) {\n    if (!isNormalized) {\n        attrs = normalize(context, attrs);\n    }\n\n    if (context.listeners) {\n        attrs.on = Object.assign({}, attrs.on, context.listeners);\n    }\n\n    return attrs;\n}\n\n// bind css scope id\nexport function bindScopeId(context, attrs = {}, isNormalized = false) {\n    if (!isNormalized) {\n        attrs = normalize(attrs);\n    }\n\n    if (context.parent && context.parent.$options._scopeId) {\n        attrs.attrs[context.parent.$options._scopeId] = '';\n    }\n\n    return attrs;\n}\n\n// bind static classes\nexport function bindStaticClasses(context, attrs = {}, isNormalized = false) {\n    if (!isNormalized) {\n        attrs = normalize(context, attrs);\n    }\n\n    if (context.data && context.data.staticClass) {\n        attrs.class.push(context.data.staticClass);\n    }\n\n    return attrs;\n}\n\n// bind static styles\nexport function bindStaticStyles(context, attrs = {}, isNormalized = false) {\n    if (!isNormalized) {\n        attrs = normalize(context, attrs);\n    }\n\n    if (context.data && context.data.staticStyle) {\n        attrs.style = Object.assign({}, attrs.style, context.data.staticStyle);\n    }\n\n    return attrs;\n}\n\n// bind static and dynamic styles\nexport function bindStyles(context, attrs = {}, isNormalized = false) {\n    if (!isNormalized) {\n        attrs = normalize(context, attrs);\n    }\n\n    attrs = bindDynamicStyles(context, attrs);\n    attrs = bindStaticStyles(context, attrs);\n\n    return attrs;\n}\n"],"names":["normalize","context","attrs","TypeError","Object","assign","bindAll","bindAttributes","bindStyles","bindClasses","bindDirectives","bindEventListeners","bindScopeId","isNormalized","data","directives","find","name","value","style","display","bindDynamicClasses","bindStaticClasses","class","push","split","Array","isArray","keys","filter","className","forEach","bindDynamicStyles","listeners","on","parent","$options","_scopeId","staticClass","bindStaticStyles","staticStyle"],"mappings":"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"}